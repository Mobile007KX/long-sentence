<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æŒ‘æˆ˜æ¨¡å¼æµ‹è¯• - æ¸è¿›å¼ç­”æ¡ˆå±•ç¤º</title>
    <link rel="stylesheet" href="challenge-mode-optimized.css">
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            background: #f0f2f5;
            margin: 0;
            padding: 20px;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
        }
        
        h1 {
            text-align: center;
            color: #333;
            margin-bottom: 30px;
        }
        
        /* è¦†ç›–ä¸€äº›æ ·å¼ä»¥é€‚é…æµ‹è¯• */
        .challenge-mode-container {
            display: block !important;
        }
        
        .challenge-selection,
        .challenge-summary {
            display: none !important;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ¯ æŒ‘æˆ˜æ¨¡å¼ - æ¸è¿›å¼ç­”æ¡ˆå±•ç¤ºæµ‹è¯•</h1>
        
        <div class="challenge-mode-container">
            <!-- éš¾åº¦é€‰æ‹© -->
            <div class="challenge-selection">
                <h2>é€‰æ‹©æŒ‘æˆ˜éš¾åº¦</h2>
                <div class="difficulty-selector">
                    <button class="difficulty-btn" data-difficulty="easy">
                        <div class="difficulty-name">ç®€å•</div>
                        <div class="difficulty-desc">åŸºç¡€å¥å‹ï¼Œ15-20ä¸ªå•è¯</div>
                        <div class="difficulty-time">â± 30ç§’</div>
                    </button>
                    <button class="difficulty-btn active" data-difficulty="medium">
                        <div class="difficulty-name">ä¸­ç­‰</div>
                        <div class="difficulty-desc">å¤åˆå¥å‹ï¼Œ20-30ä¸ªå•è¯</div>
                        <div class="difficulty-time">â± 25ç§’</div>
                    </button>
                    <button class="difficulty-btn" data-difficulty="hard">
                        <div class="difficulty-name">å›°éš¾</div>
                        <div class="difficulty-desc">å¤æ‚å¥å‹ï¼Œ30-40ä¸ªå•è¯</div>
                        <div class="difficulty-time">â± 20ç§’</div>
                    </button>
                    <button class="difficulty-btn" data-difficulty="expert">
                        <div class="difficulty-name">ä¸“å®¶</div>
                        <div class="difficulty-desc">å­¦æœ¯çº§åˆ«ï¼Œ40+å•è¯</div>
                        <div class="difficulty-time">â± 15ç§’</div>
                    </button>
                </div>
                
                <div class="count-selector">
                    <label>æŒ‘æˆ˜é¢˜æ•°ï¼š</label>
                    <button class="count-option" data-count="1">1é¢˜</button>
                    <button class="count-option active" data-count="3">3é¢˜</button>
                    <button class="count-option" data-count="5">5é¢˜</button>
                    <button class="count-option" data-count="10">10é¢˜</button>
                </div>
                
                <button class="start-challenge-btn">å¼€å§‹æŒ‘æˆ˜</button>
            </div>
            
            <!-- æŒ‘æˆ˜ç•Œé¢ -->
            <div class="challenge-game" style="display: block;">
                <div class="challenge-header">
                    <div class="challenge-progress">é¢˜ç›® 1 / 1</div>
                    <div class="timer">
                        <div class="timer-circle">
                            <svg width="50" height="50">
                                <circle cx="25" cy="25" r="20" fill="none" stroke="#e0e0e0" stroke-width="3"/>
                                <circle class="timer-arc" cx="25" cy="25" r="20" fill="none" stroke="#4CAF50" stroke-width="3"
                                        stroke-dasharray="125.66" stroke-dashoffset="0"
                                        transform="rotate(-90 25 25)"/>
                            </svg>
                            <div class="timer-text">10</div>
                        </div>
                    </div>
                    <div class="score-display">å¾—åˆ†: 95</div>
                </div>
                
                <div class="challenge-content">
                    <div class="instructions">æ ‡è®°å‡ºå¥å­çš„ä¸»å¹²æˆåˆ†ï¼ˆä¸»è¯­ã€è°“è¯­ã€å®¾è¯­/è¡¥è¯­ï¼‰</div>
                    
                    <div class="sentence-display">
                        <span class="word-token selected" data-word="Scientists" data-index="0">Scientists</span>
                        <span class="word-token" data-word="from" data-index="1">from</span>
                        <span class="word-token" data-word="various" data-index="2">various</span>
                        <span class="word-token" data-word="countries" data-index="3">countries</span>
                        <span class="word-token selected" data-word="have" data-index="4">have</span>
                        <span class="word-token selected" data-word="discovered" data-index="5">discovered</span>
                        <span class="word-token" data-word="a" data-index="6">a</span>
                        <span class="word-token selected" data-word="method" data-index="7">method</span>
                        <span class="word-token" data-word="to" data-index="8">to</span>
                        <span class="word-token" data-word="reduce" data-index="9">reduce</span>
                        <span class="word-token" data-word="carbon" data-index="10">carbon</span>
                        <span class="word-token" data-word="emissions" data-index="11">emissions</span>
                        <span class="word-token" data-word="significantly" data-index="12">significantly</span>
                        <span class="word-token" data-word="." data-index="13">.</span>
                    </div>
                    
                    <div class="challenge-actions">
                        <button class="submit-btn">æäº¤ç­”æ¡ˆ</button>
                        <button class="clear-btn">æ¸…é™¤é€‰æ‹©</button>
                    </div>
                </div>
            </div>
            
            <!-- æ€»ç»“ç•Œé¢ -->
            <div class="challenge-summary">
                <!-- æ€»ç»“å†…å®¹ -->
            </div>
        </div>
    </div>
    
    <script src="challenge-mode.js"></script>
    <script src="ai-assistant-final.js"></script>
    <script>
        // åˆå§‹åŒ–æŒ‘æˆ˜æ¨¡å¼
        const challengeMode = new ChallengeMode();
        
        console.log('ChallengeMode initialized:', challengeMode);
        
        // æ·»åŠ é”™è¯¯å¤„ç†
        window.onerror = function(msg, url, lineNo, columnNo, error) {
            console.error('Error: ', msg, '\nURL: ', url, '\nLine: ', lineNo);
            return false;
        };
        
        // æ¨¡æ‹ŸæŒ‘æˆ˜å®Œæˆï¼Œç›´æ¥æ˜¾ç¤ºç­”æ¡ˆ
        setTimeout(() => {
            console.log('Starting test...');
            
            // è®¾ç½®æµ‹è¯•æ•°æ®
            challengeMode.currentChallenge = {
                sentence: "Scientists from various countries have discovered a method to reduce carbon emissions significantly.",
                pattern: "SVO",
                components: {
                    subject: "Scientists",
                    verb: "have discovered",
                    object: "method"
                },
                explanation: "è¿™æ˜¯ä¸€ä¸ªå…¸å‹çš„SVOç»“æ„"
            };
            
            // è®¾ç½®é€‰ä¸­çš„tokens
            challengeMode.selectedTokens = new Set([0, 4, 5, 7]);
            
            console.log('Challenge data set:', challengeMode.currentChallenge);
            
            // è®¡ç®—ç»“æœ
            const result = challengeMode.calculateResult();
            console.log('Result calculated:', result);
            
            // æ˜¾ç¤ºç»“æœ
            challengeMode.showResult(result);
            console.log('Result displayed');
        }, 1000);
    </script>
</body>
</html>